notifications:
  email:
    on_success: never
    on_failure: always

language: cpp
compiler: g++
os: linux
sudo: required
dist: trusty

addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - g++-5

env:
  global:
    - COMPILER=g++-5
  matrix:
    - CU_TEST=true C3D_ALL=false
    - CU_TEST=false C3D_ALL=true

before_script:
  - sudo apt-get update -qq
  - sudo apt-get install libc6-dev
  - sudo apt-get install gcc-5-multilib g++-5-multilib
  - sudo apt-get install cmake
  - sudo apt-get install libfreeimage-dev
  - sudo apt-get install libfreetype6-dev
  - sudo apt-get install zlib1g-dev
  - sudo apt-get install libglm-dev
  - sudo apt-get install libassimp-dev
  - sudo apt-get install libwxgtk3.0-dev
  - sudo apt-get install libgtk2.0-dev
  - export CXX="g++-5"
  - export CC="gcc-5"

script:
  - mkdir -p build
  - cd build
  - if $CU_TEST; then cmake -DCMAKE_BUILD_TYPE=Release ../source -DPROJECTS_USE_PRECOMPILED_HEADERS=OFF -DCASTOR_BUILD_CASTOR3D=OFF -DCASTOR_BUILDGRP_TEST=ON -DCASTOR_BUILD_TEST_CASTORUTILS=ON; else cmake -DCMAKE_BUILD_TYPE=Release ../source -DPROJECTS_USE_PRECOMPILED_HEADERS=OFF -DCASTOR_BUILDGRP_TEST=OFF -DCASTOR_BUILDGRP_INTEROP=OFF -DCASTOR_BUILDGRP_SAMPLE=ON -DCASTOR_BUILDGRP_DIVIDER=OFF -DCASTOR_BUILDGRP_TONEMAPS=OFF -DCASTOR_BUILDGRP_GENERIC=OFF -DCASTOR_BUILDGRP_IMPORTER=ON -DCASTOR_BUILDGRP_POSTFX=OFF -DCASTOR_BUILD_SAMPLE_CASTOR_TD=OFF -DCASTOR_BUILD_SAMPLE_CASTOR_VIEWER=OFF -DCASTOR_BUILD_TEST_RENDERER_OGL=OFF -DCASTOR_FORCE_ALL_IMPORTERS=OFF; fi
  - make -j4
  - if $CU_TEST; then make test; fi

branches:
  only:
    - master
    - development
    - travis
